end
g |> aggregate(:(Mean = mean(Volume)))
for g in gg
print(g |> aggregate(:(Mean = mean(Volume))))
end
gg |> aggregate(:(Mean = mean(Volume)))
gg |> aggregate(:(Mean = mean(Volume)))
gg.values
names(gg)
for g in gg
print(g |> aggregate(:(Mean = mean(Volume))))
end
gg |> aggregate(:(Mean = mean(Volume)))
gg[1] |> aggregate(:(Mean = mean(Volume)))
gg[2] |> aggregate(:(Mean = mean(Volume)))
gg[10] |> aggregate(:(Mean = mean(Volume)))
[g |> aggregate(:(Mean = mean(Volume))) for g in gg]
reduce(vcat, [g |> aggregate(:(Mean = mean(Volume))) for g in gg])
aggregate(:(Mean = mean(Volume)), gg)
gg |> aggregate(:(Mean = mean(Volume)))
@which aggregate(:(Mean = mean(Volume)), gg)
@which aggregate(:(Mean = mean(Volume)))
@which aggregate([:(Mean = mean(Volume))])
aggregate(:(Mean = mean(Volume)), gg)
[aggregate(:(Mean = mean(Volume)), g) for g in gg]
hcat([aggregate(:(Mean = mean(Volume)), g) for g in gg])
hcat([aggregate(:(Mean = mean(Volume)), g) for g in gg]...)
vcat([aggregate(:(Mean = mean(Volume)), g) for g in gg]...)
for g in gg print(typeof(g)) end
for g in gg println(typeof(g)) end
expr = :(Mean = mean(Volume))
gg[1] |> aggregate(expr)
gg[2] |> aggregate(expr)
gg[3] |> aggregate(expr)
gg[10] |> aggregate(expr)
aggregate(expr)
myf = aggregate(expr)
myf(gg)
@which myf(gg)
myagg(df::AbstractDataFrame) = aggregate(expr)
@which myagg(gg)
@which myagg(gg[1])
myagg(gg[1])
myagg
methods(myagg)
df -> aggregate(expr)
aggregate(expr, gg[1])
aggregate(expr, gg[10])
[g |> aggregate(expr) for g in gg]
gg[1]
gg[2]
@which aggregate(expr, gg[2])
parse_df_expr(expr.args[2], gg[2])
parse_df_expr(expr.args[2], gg[2]) |> eval
parse_df_expr(expr.args[2], gg[10]) |> eval
parse_df_expr(expr.args[2], gg[10])
parse_df_expr(expr.args[2], gg[1])
getindex(gg[2], :Volume)
getindex(gg[10], :Volume)
parse_df_expr(expr, gg[1])
parse_df_expr(expr, gg[2])
Expr(:call, :getindex, gg[2], QuoteNode(:Volume))
names(gg[2])
names(gg[1])
expre
expr
expr = :(mean = mean(Volume))
parse_df_expr(expr, gg[1])
expr
copy(expr)
setindex
expr = :(mean = mean(Volume))
parse_df_expr(expr, gg[1])
parse_df_expr(expr, gg[2])
parse_df_expr(expr, gg[10])
expr
parse_df_expr(expr, gg[10])
parse_df_expr(expr, gg[10])
parse_df_expr(expr, googdata)
expr
expr.args
expr.args[2]
expr.args[2].args
isa(expr.args[2].args[2], Symbol)
expr.args[2].args[2] in names(gg[2])
expr2 = copy(expr)
expr2
expand_nodes(expr2)
expand_nodes(expr2, gg[2])
expr2
expand_nodes(expr2, gg[2])
expand_nodes(expr2, gg[2])
expand_nodes(expr2, gg[2])
expand_nodes(expr2, gg[3])
parse_df_expr(expr2, gg[3])
parse_df_expr(expr2, gg[1])
aggregate(expr, gg[1])
aggregate(expr, gg[2])
aggregate(expr, gg[10])
aggregate(expr, gg)
vcat(aggregate(expr, gg))
names(gg)
typeof(gg)
gg.cols
gg[1]
gg[2]
gg[10]
gg[15]
gg[13]
gg[14]
gg[12]
gg |> aggregate(expr)
aggregate(expr, gg[1])
[aggregate(expr, g) for g in gg]
vcat([aggregate(expr, g) for g in gg])
vcat([aggregate(expr, g) for g in gg]...)
aggregate(expr, gg)
@which gg |> aggregate(expr)
aggregate(expr)
aggregate(expr)(gg)
aggregate(expr, gg)
aggregate(expr, gg)
@which aggregate(expr, gg)
aggregate(expr, gg)
vcat(aggregate(expr, gg)...)
aggregate(expr, gg)
aggregate(expr, gg)
aggregate(expr, gg)
aggregate([expr], gg[1])
aggregate([expr], gg[2])
aggregate([expr], gg[3])
map(aggregate([expr]), gg)
[aggregate([expr])(g) for g in gg]
[g |> aggregate([expr]) for g in gg]
vcat([g |> aggregate([expr]) for g in gg]...)
aggregate([expr], gg)
gg |> aggregate(expr)
gg |> aggregate(:(mean = mean(Volume), max = maximum(Volume)))
gg |> aggregate(:(mean = mean(Volume)), :(max = maximum(Volume)))
gg
typeof(gg)
methods(names)
names(GroupedDataFrame)
gg.idx
gg.starts
gg.ends
gg.col
gg.cols
names(GroupedDataFrame)
gg.parent
getindex(gg[1], 1, gg.cols)
gg.parent[gg.starts, gg.cols]
gg |> aggregate(expr)
gg[1][gg[1][:Open] < gg[1][:Close], :]
gg[1][gg[1][:Open] .< gg[1][:Close], :]
gg[1][:Test] = 100
getindex!
typealias myInt Int32
myInt
gg |> where(:(Open .> Close))
where(:(Open .> Close), gg)
select
methods(select)
Base.select
select(x::String) = x[1]
help(DataFrame)
where(:(Open .> Close), gg)
where(:(Open .> Close), gg)
where(:(Open .> Close), gg)
@where where(:(Open .> Close), gg)
@which where(:(Open .> Close), gg)
where(:(Open .> Close), googdata)
googdata |> where(:(Open .> Close))
googdata |> where(:(Open .> Close))
googdata |> where(:(Open .> Close))
googdata |> where(:(Open .> Close), :(Month == "01"))
Month == "01"
googdata |> where(:(Open .> Close), :(Month .== "01"))
googdata |> where(:(Open .> Close & Month .== "01"))
googdata |> where(:((Open .> Close) & (Month .== "01")))
expr = :(Open .> Close & Month .== "01")
expr.head
expr.args
expr.args[3]
expr.args[3].head
parse_df_expr(expr)
parse_df_expr(expr, googdata)
typeof(expr.args[3])
expr = :(log(Open) - log(Close) .> 0.0)
googdata |> where(expr)
googdata |> where(expr)
parse_df_expr(expr, googdata)
googdata |> where(expr)
googdata |> where(:(Open .> Close & Month .== "01"))
googdata |> where(:(Open .> Close .& Month .== "01"))
googdata |> where(:(Open .> Close && Month .== "01"))
googdata |> where(:(Open .> Close & Month .== "01"))
googdata |> where(:((Open .> Close) & (Month .== "01")))
gg |> where(expr)
gg |> where(expr)
gg |> where(expr)
try x = 1 catch x = 2 end
x
gg |> where(expr)
gg |> where(expr)
expr
gg |> where(:((Open .> Close) & (Month .== "01")))
typeof(googdate[:Date])
typeof(googdata[:Date])
googdata
map(year, data[:Date])
data |> update(:(Year = map(year, Date))
)
data |> update(:(Month = map(month, Date))
)
nothing
data
expr = :(Volume .>= quantile(Volume, .75))
where(expr, data)
gg = data |> groupby(:Year, :Month)
gg = data |> groupby(:Year, :Month)
gg |> where(expr)
using DataFrames
Queries.update
quit
date
groupby
import DataFrames.groupby
GroupApplied <: GroupedDataFrame
typeof(data)
 names(GroupApplied)
data.keys
vcat(data.keys)
typeof(data)
aggregte(:(Avg = mean(Spread)), data)
aggregate(:(Avg = mean(Spread)), data)
data.keys
vcat(data.keys)
aggregate(:(Avg = mean(Spread)), data)
expr = :(AV = mean(Volume))
map(aggregate(expr), data)
length(map(aggregate(expr), data))
vcat(map(aggregate(expr), data)...)
vcat(map(aggregate(expr), data))
map(aggregate(expr), data)
mm = map(aggregate(expr), data)
length(mm)
for (i, d) in enumerate mm
print i
for (i, d) in enumerate mm
print(i)
end
 mm.keys
length(mm.keys)
 mm[1]
 mm
mm.vals
vcat(mm.vals)
vcat(mm.vals...)
vcat(vcat(mm.vals...))
mm.vals
[mm.vals]
length(mm.vals)
vcat(length(mm.vals))
mm.vals[1]
mm.vals[1][1]
mm.vals[1:10]
[mm.vals[1:10]]
mm.vals[1]
mm.vals[1][1]
mm.vals...
vcat(mm.vals...)
vcat(vcat(mm.vals...))
vcat(vcat(mm.vals...)...)
end
vcat(map(aggregate(expr), data))
typeof(data)
@which aggregate(expr, data)
aggdfs = map(aggregate(expr), data)
aggdfs.keys
vcat(aggdfs.keys)
kk=vcat(aggdfs.keys)
aggregate(expr, data)
minumum(googdata[:Volume])
minimum(googdata[:Volume])
minimum(data[:Volume])
expr = [:(AvgVolume = mean(Volume)),
              :(AvgSpread = mean(Spread))]
@which aggregate(expr, data)
aggregate(expr, data)
aggregate(expr, fulldata)
aggregate(expr, fulldata)
aggregate(expr, fulldata)
fulldata[1]
fulldata[2]
map(aggregate(expr), fulldata)
vcat(map(aggregate(expr), fulldata).vals...)
vcat(map(aggregate(expr), fulldata).vals...)
fulldata.parent.keys[fulldata.start, fulldata.cols]
fulldata.parent[fulldata.start, fulldata.cols]
fulldata
names(GroupedData)
names(GroupedDataFrame)
fulldata.parent[fulldata.starts, fulldata.cols]
hcat(fulldata.parent[fulldata.starts, fulldata.cols], vcat(map(aggregate(expr), fulldata).vals...))
mm = map(aggregat(expr), fulldata)
mm = map(aggregate(expr), fulldata)
typeof(mm)
typeof(fulldata)
fulldata |> aggregate(expr)
@which aggregate(expr)(fulldata)
aggregate(expr, fulldata)
@which aggregate(expr, fulldata)
@which aggregate(expr, fulldata)
aggregate(expr, fulldata)
aggregate(expr, fulldata)
aggregate(expr, data)
aggregate(expr, fulldata)
@which aggregate(expr, data)
aggregate(expr, fulldata)
aggregate(expr, fulldata)
aggregate(expr, data)
expr
map(a -> aggregate(a, data), expr)
merge(map(a -> aggregate(a, data), expr)...)
join(map(a -> aggregate(a, data), expr)...)
join(map(a -> aggregate(a, data), expr)..., on=[:Year, :Month])
typeof(date)
typeof(data)
typeof(data[1])
names(GroupApplied)
typeof(data.keys[1])
typeof(data.vals[1])
map(aggregate(expr), data.vals)
vcat(map(aggregate(expr), data.vals))
vcat(map(aggregate(expr), data.vals)...)
data |> aggregate(expr)
data |> aggregate(:(mean = mean(Volume)))
(data |> aggregate(:(mean = mean(Volume)))).keys
(data |> aggregate(:(mean = mean(Volume)))).vals
data |> aggregate(:(mean = mean(Volume)))
data |> aggregate(expr)
vcat(data |> aggregate(expr))
vcat((data |> aggregate(expr))...)
vcat((data |> aggregate(expr))...)
data |> aggregate(expr)
data |> aggregate(expr)
data |> aggregate(:(mean = mean(Volume)))
typeof(data |> aggregate(:(mean = mean(Volume))))
aggregate(expr, data)
expr |> aggregate(expr)
data |> aggregate(expr)
expr1 = :(mean = mean(Volume))
aggregate(expr1, data)
vcat(aggregate(expr1, data)...)
map(aggregate(expr1), data)
map(aggregate(expr1), data.vals)
vcat(map(aggregate(expr1), data.vals)...)
vcat(vcat(map(aggregate(expr1), data.vals)...)...)
aggregate(expr1, data)
sort(data, [:Year, :Month])
methods(DataFrame.sort)
sortperm(data[:Year])
sortperm(data[[:Year, :Month]])
sortperm(data[:AvgSpread])
sortperm(-data[:AvgSpread])
sortperm(-data[:Year, :AvgSpread])
sortperm(-data[[:Year, :AvgSpread]])
Queries.update
Query.update
Queries.update
data |> Queries.update(:(Date = map(date, Date)))
date
using Datetime
date
data |> Queries.update(:(Date = map(date, Date)))
Queries.parse_df_expr
Queries.parse_df_expr(:map(date, Date), data)
Queries.parse_df_expr(:(map(date, Date)), data)
eval(Queries.parse_df_expr(:(map(date, Date)), data))
^
10^20
:(10^2)
:(10^2).head
:(10^2).args
:(^2).args
:(2^).args
methods(^)
@equal (10*2 + 1) (25)
@equal (10*2 + 1) (25)
@equal (10*2 + 1) (25)
@equal (10*2 + 1) (21)
@equal (10*2) (20)
@equal 10 10
@equal 10 10
@equal 5*4 10*2
@isten 10
10 |> @isten
typeof(isten)
typeof(@isten)
@isequal 10
@equal 10
ex = :(update(:(Year = year(Date))))
ex.head
ex.args
ten 100
@ten 100
ten 100
@ten 100
@ten blah
@ten blah |> sum
@ten blah 
(@ten blah) |> sum
a = @ten 100
a
ex = :(begin f(x = 100); g(y > 10) end)
ex.head
ex.args
ex.args[1]
typeof(ex.args[1])
@query 100 10
Queries.parse_df_expr(:(x = 10))
Queries.parse_df_expr(:(x = 10), data)
Queries.parse_df_expr(:(Date = 10), data)
Queries.parse_df_expr(:(X = 10), data)
Queries.parse_df_expr(:(X > 10), data)
Queries.parse_df_expr(:(X > date("2014-03-05"), data)
)
Queries.parse_df_expr(:(X > date("2014-03-05")), data)
Queries.parse_df_expr(:(X > map(date, Date)), data)
eval(Queries.parse_df_expr(:(X > map(date, Date)), data))
eval(Queries.parse_df_expr(:(Date > map(date, Date)), data))
eval(Queries.parse_df_expr(:(map(date, Date)), data))
 :(10 + 2).head
 :(10 + 2).args
push!([], 2)
push!(2, [])
push!(2, Int[])
push!(Int[], 2)
push!([1,2,3], [3,4,5])
vcat([1,2,3], 4)
|>
Base.|>
Q
q1 |> q2
->
using DataFrames
GroupApplied
q1 |> q2
reduce(|>, [q1, q1])
reduce(|>, [q1, q2])
help(GroupedDataFrame)
:(do x = 10
ex = begin quote
do
ex
ex.head
:(q1)
typeof(:(q1))
typeof(eval(:q1))
eval(ex)
z
x
reduce(+, 1:10, 100)
reduce(+, [1:10], 100)
f(x) = x*x
g(x) = x + 10
reduce(|>, [f, g], 10)
reduce((x,y) -> x / y, [1:10], 100)
fold
reduce(|>, [f, g])
reduce(|>, [f, g], 10)
reduce(|>, 10, [f, g])
10 |> f
10 |> f |> g
methods(reduce)
reduce(|>, 10, {f, g})
@which reduce(|>, 10, {f, g})
foldl(|>, 10, [f, g])
foldl(|>, 10, [g, f])
@testit 10
@testit 10.5
@testit x+100
@testit :(x+100)
@testit y+10
@testit "hello"
q1
[1, 2, 3] > [4,5,-10]
[1, 2, 3] .> [4,5,-10]
writetable
methods(writetable)
pwd()
isa(10, Int)
ex = :(Date == "2004-09-01")
ex.head
ex.args
:(1 + 2).head
:(1 + 2).args
:(1 & 2).args
:(1 & 2).head
